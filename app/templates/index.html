<html>

<script type=text/javascript src="{{ url_for('static', filename='jquery/jquery-3.1.1.min.js') }}"></script>

<script type=text/javascript>
	$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};

	$(document).ready(function() {
		$('#body_table').on('click', '.bid_button', function() {
			$.getJSON($SCRIPT_ROOT + '/do_action', {
				bid: $(this).val()
			}, function(data) {
				$('#log').html(data.msg);
				$('#adv_button_cell') = '<button id="adv_button" type="button">Next</button>';
			});
			return false;
		});

		$('#adv_button_cell').on('click', '#adv_button', function() {
			$.getJSON($SCRIPT_ROOT + '/do_action', {
				bot: true
			}, function(data) {
				$('#log').html(data.msg);
				$('#middle_box').html(data.middle);
			})
		})
	});
</script>

<head>
	<title>pb - Pitch Bot</title>
</head>
<body>
	<table id="body_table">
		<tr>
			<td id="opponent_name"><b>Player 2</b></td>
		</tr>
		<tr>
			<td id="opponent_cards" height="200px"></td>
		</tr>
		<tr>
			<td id="middle_box" height="200px">
				{% if session['active_player'] == 0 %}
				<table>
					<tr>
						<td><button class="bid_button" type="button" value="0">Pass</button></td>
						<td><button class="bid_button" type="button" value="2">Bid 2</button></td>
						<td><button class="bid_button" type="button" value="3">Bid 3</button></td>
						<td><button class="bid_button" type="button" value="4">Bid 4</button></td>
					</tr>
				</table>
				{% endif %}
			</td>
		</tr>
		<tr>
			<td id="player_box" height="200px"></td>
		</tr>
		<tr>
			<td id="player_name"><b>Player 1</b></td>
		</tr>
		<tr>
			<td id="log">
				{% if session['active_player'] != 0 %}
				<p><b>Player {{ session['active_player']+1 }}</b> bids first.</p>
				{% endif %}
			</td>
		</tr>
		<tr>
			<td id="adv_button_cell">
				{% if session['active_player'] != 0 %}
				<button id="adv_button" type="button">Next</button>
				{% endif %}
			</td>
		</tr>
	</table>
</body>
</html>
